(this.webpackJsonpcovidstats=this.webpackJsonpcovidstats||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),o=a(148),s=a(147),i=a(69),u=Object(i.a)({palette:{type:"light"}}),m=a(14),d=function(e){var t=e.getFullYear(),a=""+(e.getMonth()+1),n=""+e.getDate();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[t,a,n].join("-")},f=function(e){var t=e.country,a=e.cases,n=e.deaths,r=e.tests,l=a.total&&r.total?Math.round(r.total/a.total):null;return{name:t,newCases:a.new?+a.new.replace("+",""):null,activeCases:a.active,criticalCases:a.critical,recoveredCases:a.recovered,totalCases:a.total,newDeaths:n.new?+n.new.replace("+",""):null,totalDeaths:n.total,testPerCase:l,totalTests:r.total}},g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if("number"!==typeof e||"number"!==typeof t)throw Error("numerator and denominator have to be numbers");return(e/t*100).toFixed(a)},p=function(){return Object(n.useCallback)((function(e){var t=e.endPoint,a=e.params,n=a?function(e){var t="",a=0;for(var n in e){var r="";r+=0===a?"?":"&",t+=r+=n+"="+e[n],a++}return t}(a):null,r="https://covid-193.p.rapidapi.com/".concat(t).concat(n||"");return fetch(r,{method:"GET",headers:{"x-rapidapi-host":"covid-193.p.rapidapi.com","x-rapidapi-key":"4de95ab09fmshdc2a5620db4c9cbp1450cejsn4d7548155300"}})}),[])},h=a(133),v=a(135),b=Object(h.a)((function(e){return{loader:{display:"flex",justifyContent:"center",margin:e.spacing(3)+"px 0"}}})),C=function(){var e=b();return r.a.createElement("div",{className:e.loader},r.a.createElement(v.a,null))},E=a(103),j=a(50),O=a(32),y=a(140),w=a(143),k=a(144),S=a(139),x=a(142),B=a(138),D=a(137),R=a(154),L=function(e){var t=e.columns,a=e.onRequestSort,n=e.order,l=e.orderBy,c=Object(m.a)(e.styleClasses,3),o=c[0],s=c[1],i=c[2];return r.a.createElement(D.a,null,r.a.createElement(B.a,null,t.map((function(e,t){return r.a.createElement(S.a,{sortDirection:l===e.id&&n,key:e.id,className:[o].concat(Object(j.a)(0!==t?[s,i]:[])).join(" ")},r.a.createElement(R.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(c=e.id,function(e){a(e,c)})},e.label));var c}))))},N=a(141),T=Object(h.a)((function(e){return{cell:{fontWeight:500,padding:"8px 12px",backgroundColor:"transparent"},smallWidth:{width:"100px"},dangerCell:{background:e.palette.error.dark,color:"#fff"},warrningCell:{background:e.palette.warning.light},successCell:{background:e.palette.success.light},alignRight:{textAlign:"right"},reversedDirection:{flexDirection:"row-reverse"},tableRow:{"&:hover":{backgroundColor:e.palette.action.hover}},paper:{marginTop:e.spacing(2),marginBottom:e.spacing(4),overflow:"hidden"},tableContainer:{marginBottom:"-1px"}}})),A=r.a.memo((function(e){var t=e.stats,a=Object(O.f)(),l=r.a.useState("desc"),c=Object(m.a)(l,2),o=c[0],s=c[1],i=r.a.useState("totalCases"),u=Object(m.a)(i,2),d=u[0],f=u[1],g=T(),p=[{id:"name",label:"Country",classes:[g.cell],format:function(e){return"All"!==e?r.a.createElement(y.a,{href:"#",onClick:function(t){return function(e,t){e.preventDefault(),a.push(t)}(t,"/country/"+e)}},e):e}},{id:"totalCases",label:"Total cases",classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}},{id:"newCases",label:"New cases",activeClass:g.warrningCell,classes:[g.cell,g.alignRight,g.smallWidth],format:function(e){return e?"+"+e.toLocaleString():null}},{id:"newDeaths",label:"New deaths",activeClass:g.dangerCell,classes:[g.cell,g.alignRight,g.smallWidth],format:function(e){return e?"+"+e.toLocaleString():null}},{id:"totalDeaths",label:"Total deaths",classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}},{id:"activeCases",label:"Active cases",classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}},{id:"criticalCases",label:"Critical cases",classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}},{id:"recoveredCases",label:"Revoered cases",activeClass:g.successCell,classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}},{id:"testPerCase",label:"Test per case",classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}},{id:"totalTests",label:"Total tests",classes:[g.cell,g.alignRight],format:function(e){return e?e.toLocaleString():null}}],h=Object(n.useCallback)((function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}),[]),v=Object(n.useCallback)((function(e,t){return"desc"===e?function(e,a){return h(e,a,t)}:function(e,a){return-h(e,a,t)}}),[h]),b=Object(n.useCallback)((function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}),[]);return r.a.createElement(N.a,{className:g.paper},r.a.createElement(x.a,{className:g.tableContainer},r.a.createElement(w.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(L,{onRequestSort:function(e,t){s(d===t&&"asc"===o?"desc":"asc"),f(t)},columns:p,order:o,orderBy:d,styleClasses:[g.cell,g.reversedDirection,g.alignRight]}),r.a.createElement(k.a,null,b(t,v(o,d)).map((function(e,t){return r.a.createElement(B.a,{className:g.tableRow,key:t},p.map((function(t){var a=[].concat(Object(j.a)(t.classes),[t.activeClass&&e[t.id]?t.activeClass:null]);return r.a.createElement(S.a,{key:t.id,className:a.join(" ")},t.format?t.format(e[t.id]):e[t.id])})))}))))))})),F=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),o=Object(m.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(!1),d=Object(m.a)(u,2),g=d[0],h=d[1],v=p(),b=Object(n.useCallback)((function(e){var t=[],a=["North-America","Europe","Asia","South-America","Oceania","Africa"];return[e.filter((function(e){return a.indexOf(e.name)>=0?(t.push(e),!1):("All"===e.name&&t.push(e),!0)})),t]}),[]);Object(n.useEffect)((function(){var e=!0;return h(!0),v({endPoint:"statistics"}).then((function(e){return e.json()})).then((function(t){var a=t.response.map((function(e){return f(e)})),n=b(a),r=Object(m.a)(n,2),c=r[0],o=r[1];e&&(l(c),i(o),h(!1))})).catch((function(e){h(!1),console.log(e)})),function(){return e=!1}}),[b,v]);var j=null;return g&&(j=r.a.createElement(C,null)),a&&s&&(j=r.a.createElement(n.Fragment,null,r.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2",align:"center"},"Stats for countries"),r.a.createElement(A,{stats:a}),r.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2",align:"center"},"Stats for continents"),r.a.createElement(A,{stats:s}))),j},P=a(56),W=a.n(P),I=a(66),M=a(15),q=a(149),J=a(67),U=a(150),_=a(145),G=Object(h.a)((function(e){return{spacing:{padding:e.spacing(2)},success:{color:e.palette.success.dark},mediumBold:{fontWeight:500},danger:{color:e.palette.error.dark},muted:{color:e.palette.grey[600]}}})),H=function(e){var t=e.title,a=e.data,l=e.type,c=void 0===l?"muted":l,o=G(),s=a.map((function(e,t){return r.a.createElement(_.a,{item:!0,xs:6,key:t},r.a.createElement(E.a,{variant:"subtitle1",component:"p",align:t>0?"right":"left",className:o[c]},e.label),r.a.createElement(E.a,{variant:"h5",component:"p",align:t>0?"right":"left",className:[o[c],o.mediumBold].join(" ")},e.value),e.difference?r.a.createElement(n.Fragment,null,r.a.createElement(E.a,{variant:"subtitle1",component:"p",align:t>0?"right":"left",className:o[c]},"Difference"),r.a.createElement(E.a,{variant:"h5",component:"p",align:t>0?"right":"left",className:[o[c],o.mediumBold].join(" ")},e.difference)):null)}));return r.a.createElement(N.a,{className:o.spacing},r.a.createElement(E.a,{gutterBottom:!0,variant:"h5",component:"h2",align:"center"},t),r.a.createElement(_.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},s))},Y=Object(h.a)((function(e){return{spacingBottom:{paddingBottom:e.spacing(3)}}})),$=function(e){var t=e.data,a=e.title,l=Y(),c=t.map((function(e,t){var a=e.title,n=e.data,l=e.type;return r.a.createElement(_.a,{item:!0,xs:12,sm:6,md:4,key:t},r.a.createElement(H,{title:a,data:n,type:l}))}));return r.a.createElement(n.Fragment,null,a?r.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2",align:"center",weight:"700"},a):null,r.a.createElement(_.a,{container:!0,spacing:3,direction:"row",justify:"flex-start",alignItems:"stretch",className:l.spacingBottom},c))},z=Object(h.a)((function(e){return{spacingBottom:{marginBottom:e.spacing(2)}}})),K=function(e){var t=Object(O.g)().params,a=Object(O.f)(),l=z(),c=Object(n.useState)(null),o=Object(m.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(null),h=Object(m.a)(u,2),v=h[0],b=h[1],j=Object(n.useState)(!1),y=Object(m.a)(j,2),w=y[0],k=y[1],S=Object(n.useState)(t.date?t.date:d(new Date)),x=Object(m.a)(S,2),B=x[0],D=x[1],R=p(),L=Object(n.useCallback)((function(e){var n=d(e._d),r=t.name;a.push("/country/".concat(r,"/").concat(n)),D(n)}),[D,a,d,t]);function N(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e-t;return r=+(r=r.toFixed(2)).toString().replace(".00",""),a=n?r.toLocaleString():r,r>0?"+"+a:a}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[{title:"Cases",data:[{label:"Total",value:e.totalCases.toLocaleString(),difference:t?N(e.totalCases,t.totalCases,!0):null},{label:"Active",value:e.activeCases.toLocaleString(),difference:t?N(e.activeCases,t.activeCases,!0):null}]},{title:"Deaths",data:[{label:"Total",value:e.totalDeaths.toLocaleString(),difference:t?N(e.totalDeaths,t.totalDeaths,!0):null},{label:"Lethality rate",value:g(e.totalDeaths,e.totalCases)+"%",difference:t?N(g(e.totalDeaths,e.totalCases),g(t.totalDeaths,t.totalCases))+"%":null}],type:"danger"},{title:"Recovered cases",data:[{label:"Total",value:e.recoveredCases.toLocaleString(),difference:t?N(e.recoveredCases,t.recoveredCases,!0):null},{label:"Recovered rate",value:g(e.recoveredCases,e.totalCases)+"%",difference:t?N(g(e.recoveredCases,e.totalCases),g(t.recoveredCases,t.totalCases))+"%":null}],type:"success"}]}Object(n.useEffect)((function(){var e=!0,a=t.name;k(!0),b(null);var n=d(new Date),r=null,l=null,c=n!==B;return Object(I.a)(W.a.mark((function t(){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=4;break}return t.next=3,R({endPoint:"history",params:{country:a,day:B}}).then((function(e){return e.json()})).then((function(t){var a=t.response;if(e){var n=Object(m.a)(a,1)[0];return f(n)}})).catch((function(e){console.log(e),k(!1)}));case 3:r=t.sent;case 4:return t.next=6,R({endPoint:"statistics",params:{country:a}}).then((function(e){return e.json()})).then((function(t){var a=t.response;if(e){var n=Object(m.a)(a,1)[0];return f(n)}})).catch((function(e){console.log(e),k(!1)}));case 6:l=t.sent,c&&b(r),i(l),k(!1);case 10:case"end":return t.stop()}}),t)})))(),function(){return e=!1}}),[t,a,R,B,d]);var A,F=null,P=null;(w&&(F=r.a.createElement(C,null)),s)&&(v?(A=T(s),P=T(v,s)):A=T(s),F=r.a.createElement(n.Fragment,null,r.a.createElement(E.a,{gutterBottom:!0,variant:"h3",component:"h1",align:"center",weight:"700"},s.name),r.a.createElement(M.a,{utils:J.a},r.a.createElement(U.a,{component:"div",align:"center",className:l.spacingBottom},r.a.createElement(q.a,{autoOk:!0,label:"Select date",disableFuture:!0,value:B,onChange:L}))),v?r.a.createElement($,{data:P,title:"Data from "+B.split("-").reverse().join(".")}):null,r.a.createElement($,{data:A,title:v?"Present statistics":null})));return F},Q=a(37),V=a(146),X=function(){return r.a.createElement(Q.a,{basename:"{process.env.PUBLIC_URL}"},r.a.createElement(V.a,{fixed:!0},r.a.createElement(O.c,null,r.a.createElement(O.a,{path:"/country/:name/:date?"},r.a.createElement(K,null)),r.a.createElement(O.a,{path:"/"},r.a.createElement(F,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(s.a,{theme:u},r.a.createElement(o.a,null),r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports=a(100)}},[[88,1,2]]]);
//# sourceMappingURL=main.ba2e1acd.chunk.js.map